
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Webhook trigger · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-toggle-chapters/toggle.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-search/search.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../../../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../object-definition.html" />
    
    
    <link rel="prev" href="poll-trigger.html" />
    

    
        <link rel="shortcut icon" href='../../../assets/images/favicon/favicon.ico' type="image/x-icon">
    
    
        <link rel="bookmark" href='../../../assets/images/favicon/favicon.ico' type="image/x-icon">
    
    
        <link rel="apple-touch-icon" href='../../../assets/images/favicon/android-chrome-36x36.png'>
    
    

    </head>
    <body>
        
  <header class="w-header">
    <div class="w-header__row w-header__row_logo">
      <a href="/">
        <img class="w-header__logo" src="/assets/images/layout/workato-logo.svg" alt="Workato docs">
      </a>
      <a href="https://workato.com" class="w-header__return">Return to workato.com</a>
    </div>
    <div class="w-header__row w-header__row_toolbar">
      <div id="book-search-input" role="search">
        <i class="fa fa-search book-search-input-icon"></i>
        <input type="text" placeholder="Type to search Workato docs"/>
      </div>
      <div class="book-header" role="navigation">
        

        <!-- Title -->
        <h1>
          <i class="fa fa-circle-o-notch fa-spin"></i>
          <a href="../../..">Webhook trigger</a>
        </h1>
      </div>
    </div>
  </header>

  
<div class="book">
    <div class="book-summary">
        
            
            
                <nav role="navigation">
                


<ul class="summary">
  
  

  

  
    

    
  
    <li class="chapter " data-level="1.1" data-path="../../../">
      

      
        <a href="../../../">
      
        
        Introduction
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.2" data-path="../../../workato-concepts.html">
      

      
        <a href="../../../workato-concepts.html">
      
        
        Concepts
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.3" data-path="../../../connections.html">
      

      
        <a href="../../../connections.html">
      
        
        Connections
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.4" data-path="../../../recipes/building-recipes.html">
      
        <i class="fa fa-angle-right chapter__toggle"></i>
      

      
        <a href="../../../recipes/building-recipes.html">
      
        
        Building recipes
      
        </a>
      

      
        <ul class="articles">
          
  
    <li class="chapter " data-level="1.4.1" data-path="../../../recipes/triggers.html">
      

      
        <a href="../../../recipes/triggers.html">
      
        
        Triggers
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.4.2" data-path="../../../recipes/steps.html">
      

      
        <a href="../../../recipes/steps.html">
      
        
        Steps
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.4.3" data-path="../../../recipes/actions.html">
      

      
        <a href="../../../recipes/actions.html">
      
        
        Actions
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.4.4" data-path="../../../recipes/data-pills-and-mapping.html">
      

      
        <a href="../../../recipes/data-pills-and-mapping.html">
      
        
        Data pills and fields mapping
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.4.5" data-path="../../../recipes/version-management.html">
      

      
        <a href="../../../recipes/version-management.html">
      
        
        Version management
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.4.6" data-path="../../../recipes/building-best-practices.html">
      

      
        <a href="../../../recipes/building-best-practices.html">
      
        
        Best practices
      
        </a>
      

      
    </li>
  

        </ul>
      
    </li>
  
    <li class="chapter " data-level="1.5" data-path="../../../formulas.html">
      

      
        <a href="../../../formulas.html">
      
        
        Data mapping formulas
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.6" data-path="../../../recipes/running-recipes.html">
      
        <i class="fa fa-angle-right chapter__toggle"></i>
      

      
        <a href="../../../recipes/running-recipes.html">
      
        
        Running recipes
      
        </a>
      

      
        <ul class="articles">
          
  
    <li class="chapter " data-level="1.6.1" data-path="../../../recipes/start-and-stop.html">
      

      
        <a href="../../../recipes/start-and-stop.html">
      
        
        Start and stop
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.6.2" data-path="../../../recipes/testing-recipes.html">
      

      
        <a href="../../../recipes/testing-recipes.html">
      
        
        Test mode
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.6.3" data-path="../../../recipes/jobs.html">
      

      
        <a href="../../../recipes/jobs.html">
      
        
        Jobs
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.6.4" data-path="../../../recipes/rerun-job.html">
      

      
        <a href="../../../recipes/rerun-job.html">
      
        
        Rerun job
      
        </a>
      

      
    </li>
  

        </ul>
      
    </li>
  
    <li class="chapter " data-level="1.7" data-path="../../../recipe-monitoring.html">
      
        <i class="fa fa-angle-right chapter__toggle"></i>
      

      
        <a href="../../../recipe-monitoring.html">
      
        
        Recipes management
      
        </a>
      

      
        <ul class="articles">
          
  
    <li class="chapter " data-level="1.7.1" data-path="../../../recipe-ops.html">
      

      
        <a href="../../../recipe-ops.html">
      
        
        Recipe ops
      
        </a>
      

      
    </li>
  

        </ul>
      
    </li>
  
    <li class="chapter " data-level="1.8" data-path="../../../features.html">
      
        <i class="fa fa-angle-right chapter__toggle"></i>
      

      
        <a href="../../../features.html">
      
        
        Features
      
        </a>
      

      
        <ul class="articles">
          
  
    <li class="chapter " data-level="1.8.1" data-path="../../../features/list-management.html">
      

      
        <a href="../../../features/list-management.html">
      
        
        List management
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.8.2" data-path="../../../features/scheduler.html">
      

      
        <a href="../../../features/scheduler.html">
      
        
        Scheduler
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.8.3" data-path="../../../features/utilities.html">
      

      
        <a href="../../../features/utilities.html">
      
        
        Utility
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.8.4" data-path="../../../features/secondary-connectors.html">
      

      
        <a href="../../../features/secondary-connectors.html">
      
        
        Secondary connectors
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.8.5" data-path="../../../features/batch-processing.html">
      

      
        <a href="../../../features/batch-processing.html">
      
        
        Batch processing
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.8.6" data-path="../../../features/lookup-tables.html">
      

      
        <a href="../../../features/lookup-tables.html">
      
        
        Lookup tables
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.8.7" data-path="../../../features/callable-recipes.html">
      

      
        <a href="../../../features/callable-recipes.html">
      
        
        Callable recipes
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.8.8" data-path="../../../features/handling-csv-files.html">
      

      
        <a href="../../../features/handling-csv-files.html">
      
        
        Handling CSV files
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.8.9" data-path="../../../features/handling-json.html">
      

      
        <a href="../../../features/handling-json.html">
      
        
        Handling JSON
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.8.10" data-path="../../../handling-xml.md">
      

      
        <span>
      
        
        Handling XML
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.8.11" data-path="../../../features/account-properties.html">
      

      
        <a href="../../../features/account-properties.html">
      
        
        Account properties
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.8.12" data-path="../../../features/data-masking.html">
      

      
        <a href="../../../features/data-masking.html">
      
        
        Data masking
      
        </a>
      

      
    </li>
  

        </ul>
      
    </li>
  
    <li class="chapter " data-level="1.9" data-path="../../../handling-files-and-attachments.html">
      

      
        <a href="../../../handling-files-and-attachments.html">
      
        
        Handling files and attachments
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.10" data-path="../../../user-accounts-and-teams.html">
      
        <i class="fa fa-angle-right chapter__toggle"></i>
      

      
        <a href="../../../user-accounts-and-teams.html">
      
        
        Working with teams
      
        </a>
      

      
        <ul class="articles">
          
  
    <li class="chapter " data-level="1.10.1" data-path="../../../user-accounts-and-teams/team-collaboration.html">
      

      
        <a href="../../../user-accounts-and-teams/team-collaboration.html">
      
        
        Collaboration
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.10.2" data-path="../../../user-accounts-and-teams/team-collaboration.html">
      

      
        <a href="../../../user-accounts-and-teams/team-collaboration.html#team-roles">
      
        
        Role-based access
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.10.3" data-path="../../../user-accounts-and-teams/team-collaboration.html">
      

      
        <a href="../../../user-accounts-and-teams/team-collaboration.html#audit-logs">
      
        
        Audit logs
      
        </a>
      

      
    </li>
  

        </ul>
      
    </li>
  
    <li class="chapter " data-level="1.11" data-path="../../../workflow.html">
      

      
        <a href="../../../workflow.html">
      
        
        People Task
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.12" data-path="../../../workbot/workbot.html">
      
        <i class="fa fa-angle-right chapter__toggle"></i>
      

      
        <a href="../../../workbot/workbot.html">
      
        
        Workbot
      
        </a>
      

      
        <ul class="articles">
          
  
    <li class="chapter " data-level="1.12.1" data-path="../../../workbot/workbot-actions.html">
      

      
        <a href="../../../workbot/workbot-actions.html">
      
        
        Workbot actions
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.12.2" data-path="../../../workbot/workbot-triggers.md">
      

      
        <span>
      
        
        Workbot triggers
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.12.3" data-path="../../../workbot/workbot-troubleshooting.html">
      

      
        <a href="../../../workbot/workbot-troubleshooting.html">
      
        
        Workbot troubleshooting
      
        </a>
      

      
    </li>
  

        </ul>
      
    </li>
  
    <li class="chapter " data-level="1.13" data-path="../../../on-prem.html">
      

      
        <a href="../../../on-prem.html">
      
        
        On premise
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.14" data-path="../../../troubleshooting.html">
      
        <i class="fa fa-angle-right chapter__toggle"></i>
      

      
        <a href="../../../troubleshooting.html">
      
        
        Troubleshooting
      
        </a>
      

      
        <ul class="articles">
          
  
    <li class="chapter " data-level="1.14.1" >
      

      
        <span>
      
        
        Trigger warnings
      
        </span>
      

      
    </li>
  
    <li class="chapter " data-level="1.14.2" data-path="../../../recipes/action-errors.html">
      

      
        <a href="../../../recipes/action-errors.html">
      
        
        Action errors
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.14.3" >
      

      
        <span>
      
        
        Mapping errors
      
        </span>
      

      
    </li>
  
    <li class="chapter " data-level="1.14.4" data-path="../../../recipes/formula-errors.html">
      

      
        <a href="../../../recipes/formula-errors.html">
      
        
        Formula errors
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.14.5" data-path="../../../recipes/infinite-loops.html">
      

      
        <a href="../../../recipes/infinite-loops.html">
      
        
        Infinite loops
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.14.6" data-path="../../../recipes/deduplication.html">
      

      
        <a href="../../../recipes/deduplication.html">
      
        
        Deduplication
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.14.7" data-path="../../../recipes/rate-limiting.html">
      

      
        <a href="../../../recipes/rate-limiting.html">
      
        
        Rate limiting
      
        </a>
      

      
    </li>
  

        </ul>
      
    </li>
  
    <li class="chapter " data-level="1.15" data-path="../../../developing-connectors.html">
      
        <i class="fa fa-angle-right chapter__toggle"></i>
      

      
        <a href="../../../developing-connectors.html">
      
        
        Developing connectors
      
        </a>
      

      
        <ul class="articles">
          
  
    <li class="chapter " data-level="1.15.1" data-path="../../http-vs-sdk.html">
      

      
        <a href="../../http-vs-sdk.html">
      
        
        Comparison of HTTP VS SDK
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.15.2" data-path="../../http.html">
      

      
        <a href="../../http.html">
      
        
        HTTP
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.15.3" data-path="../../sdk.html">
      
        <i class="fa fa-angle-right chapter__toggle"></i>
      

      
        <a href="../../sdk.html">
      
        
        SDK
      
        </a>
      

      
        <ul class="articles">
          
  
    <li class="chapter " data-level="1.15.3.1" data-path="../sdk-conceptual-model.html">
      

      
        <a href="../sdk-conceptual-model.html">
      
        
        Conceptual model
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.15.3.2" data-path="../api-requirements.html">
      

      
        <a href="../api-requirements.html">
      
        
        API requirements
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.15.3.3" data-path="../authentication.html">
      
        <i class="fa fa-angle-right chapter__toggle"></i>
      

      
        <a href="../authentication.html">
      
        
        Authentication
      
        </a>
      

      
        <ul class="articles">
          
  
    <li class="chapter " data-level="1.15.3.3.1" data-path="../authentication/basic-authentication.html">
      

      
        <a href="../authentication/basic-authentication.html">
      
        
        Basic auth
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.15.3.3.2" data-path="../authentication/oauth2-authentication.html">
      

      
        <a href="../authentication/oauth2-authentication.html">
      
        
        OAuth 2.0
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.15.3.3.3" data-path="../authentication/custom-authentication.html">
      

      
        <a href="../authentication/custom-authentication.html">
      
        
        Custom auth
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.15.3.3.4" data-path="../authentication/test.html">
      

      
        <a href="../authentication/test.html">
      
        
        Test
      
        </a>
      

      
    </li>
  

        </ul>
      
    </li>
  
    <li class="chapter " data-level="1.15.3.4" data-path="../object-definition.html">
      

      
        <a href="../object-definition.html">
      
        
        Object definition
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.15.3.5" data-path="../action.html">
      

      
        <a href="../action.html">
      
        
        Action
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.15.3.6" data-path="../trigger.html">
      
        <i class="fa fa-angle-right chapter__toggle"></i>
      

      
        <a href="../trigger.html">
      
        
        Trigger
      
        </a>
      

      
        <ul class="articles">
          
  
    <li class="chapter " data-level="1.15.3.6.1" data-path="poll-trigger.html">
      

      
        <a href="poll-trigger.html">
      
        
        Poll trigger
      
        </a>
      

      
    </li>
  
    <li class="chapter active" data-level="1.15.3.6.2" data-path="webhook-trigger.html">
      

      
        <a href="webhook-trigger.html">
      
        
        Webhook trigger
      
        </a>
      

      
    </li>
  

        </ul>
      
    </li>
  
    <li class="chapter " data-level="1.15.3.7" data-path="../object-definition.html">
      

      
        <a href="../object-definition.html">
      
        
        Object definition
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.15.3.8" data-path="../data-format.html">
      
        <i class="fa fa-angle-right chapter__toggle"></i>
      

      
        <a href="../data-format.html">
      
        
        Data format
      
        </a>
      

      
        <ul class="articles">
          
  
    <li class="chapter " data-level="1.15.3.8.1" data-path="../data-format/json-format.html">
      

      
        <a href="../data-format/json-format.html">
      
        
        JSON
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.15.3.8.2" data-path="../data-format/xml-format.html">
      

      
        <a href="../data-format/xml-format.html">
      
        
        XML
      
        </a>
      

      
    </li>
  

        </ul>
      
    </li>
  
    <li class="chapter " data-level="1.15.3.9" data-path="../methods.html">
      

      
        <a href="../methods.html">
      
        
        Methods
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.15.3.10" data-path="../pick-list.html">
      

      
        <a href="../pick-list.html">
      
        
        Pick list
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.15.3.11" data-path="../config-fields.html">
      

      
        <a href="../config-fields.html">
      
        
        Configuration fields
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.15.3.12" data-path="../examples.html">
      

      
        <a href="../examples.html">
      
        
        Examples
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.15.3.13" data-path="../publishing-process.html">
      

      
        <a href="../publishing-process.html">
      
        
        Publishing process
      
        </a>
      

      
    </li>
  

        </ul>
      
    </li>
  

        </ul>
      
    </li>
  
    <li class="chapter " data-level="1.16" data-path="../../../signing-up/sso.html">
      

      
        <a href="../../../signing-up/sso.html">
      
        
        Single Sign-On (SSO)
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.17" >
      

      
        <a target="_blank" href="https://www.workato.com/security">
      
        
        Security and compliance
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.18" data-path="../../../data-retention.html">
      

      
        <a href="../../../data-retention.html">
      
        
        Data retention
      
        </a>
      

      
    </li>
  
    <li class="chapter " data-level="1.19" data-path="../../../contact-us.html">
      

      
        <a href="../../../contact-us.html">
      
        
        Contact us
      
        </a>
      

      
    </li>
  

  
</ul>

                </nav>
            
        
    </div>

    <div class="book-body">
        
  
            <div class="body-inner">
                
                    




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="webhook-trigger">Webhook Trigger</h1>
<pre><code class="lang-ruby"><span class="hljs-symbol">triggers:</span> {
  <span class="hljs-symbol">new_message:</span> {
    <span class="hljs-symbol">type:</span> <span class="hljs-symbol">:paging_desc</span>,

    <span class="hljs-symbol">input_fields:</span> lambda <span class="hljs-keyword">do</span> |object_definitions|
      object_definitions[<span class="hljs-string">&quot;room&quot;</span>].only(<span class="hljs-string">&quot;id&quot;</span>)
    <span class="hljs-keyword">end</span>,

    <span class="hljs-symbol">webhook_subscribe:</span> lambda <span class="hljs-keyword">do</span> |webhook_url, connection, input, recipe_id|
      post(<span class="hljs-string">&quot;https://api.ciscospark.com/v1/webhooks&quot;</span>,
           <span class="hljs-symbol">name:</span> <span class="hljs-string">&quot;Workato recipe <span class="hljs-subst">#{recipe_id}</span>&quot;</span>,
           <span class="hljs-symbol">targetUrl:</span> webhook_url,
           <span class="hljs-symbol">resource:</span> <span class="hljs-string">&quot;messages&quot;</span>,
           <span class="hljs-symbol">event:</span> <span class="hljs-string">&quot;created&quot;</span>,
           <span class="hljs-symbol">filter:</span> <span class="hljs-string">&quot;roomId=<span class="hljs-subst">#{input[<span class="hljs-string">&apos;id&apos;</span>]}</span>&quot;</span>)
    <span class="hljs-keyword">end</span>,

    <span class="hljs-symbol">webhook_notification:</span> lambda <span class="hljs-keyword">do</span> |input, payload|
      payload[<span class="hljs-string">&quot;data&quot;</span>]
    <span class="hljs-keyword">end</span>,

    <span class="hljs-symbol">webhook_unsubscribe:</span> lambda <span class="hljs-keyword">do</span> |webhook|
      delete(<span class="hljs-string">&quot;https://api.ciscospark.com/v1/webhooks/<span class="hljs-subst">#{webhook[<span class="hljs-string">&apos;id&apos;</span>]}</span>&quot;</span>)
    <span class="hljs-keyword">end</span>,

    <span class="hljs-symbol">dedup:</span> lambda <span class="hljs-keyword">do</span> |message) {
      message[<span class="hljs-string">&quot;id&quot;</span>]
    <span class="hljs-keyword">end</span>,

    <span class="hljs-symbol">output_fields:</span> lambda <span class="hljs-keyword">do</span> |object_definitions|
      object_definitions[<span class="hljs-string">&quot;message&quot;</span>]
    <span class="hljs-keyword">end</span>
  }
}
</code></pre>
<h2 id="webhooksubscribe">webhook_subscribe</h2>
<p>When a recipe is started, a webhook subscription should be created. This webhook subscription should be given the &quot;callback url&quot; specific to the recipe to receive and process as jobs. This block is responsible for this subscription.</p>
<p>This block is executed whenever a recipe is started. The block usually contains the necessary API requests to create a webhook subscription. This request is typically a <strong>POST</strong> request with a payload containing the relevant data for successful event notifications.</p>
<pre><code class="lang-ruby"><span class="hljs-symbol">webhook_subscribe:</span> lambda <span class="hljs-keyword">do</span> |webhook_url, connection, input, recipe_id|
  post(<span class="hljs-string">&quot;https://api.ciscospark.com/v1/webhooks&quot;</span>,
       <span class="hljs-symbol">name:</span> <span class="hljs-string">&quot;Workato recipe <span class="hljs-subst">#{recipe_id}</span>&quot;</span>,
       <span class="hljs-symbol">targetUrl:</span> webhook_url,
       <span class="hljs-symbol">resource:</span> <span class="hljs-string">&quot;messages&quot;</span>,
       <span class="hljs-symbol">event:</span> <span class="hljs-string">&quot;created&quot;</span>,
       <span class="hljs-symbol">filter:</span> <span class="hljs-string">&quot;roomId=<span class="hljs-subst">#{input[<span class="hljs-string">&apos;id&apos;</span>]}</span>&quot;</span>)
<span class="hljs-keyword">end</span>
</code></pre>
<h3 id="webhooksubscribe-arguments">webhook_subscribe Arguments</h3>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>webhook_url</td>
<td>URL specific to the recipe. This URL is randomly generated and points to the recipe that uses this trigger. A second recipe that uses the same trigger will have a different unique URL. All webhook subscription will require this URL.</td>
</tr>
<tr>
<td>connection</td>
<td><code>connection</code> object, frequently used to access domain or subdomain information from the user.</td>
</tr>
<tr>
<td>input</td>
<td><code>input</code> object: Data from trigger input fields. In this example, the input contains the Room ID to receive messages from.</td>
</tr>
<tr>
<td>recipe_id</td>
<td>Recipe ID of the recipe using this trigger. This is useful to identify webhook-recipe pairs in the event of multiple pairs.</td>
</tr>
</tbody>
</table>
<h3 id="output">Output</h3>
<p>Output of the webhook_subscribe block is the response from the <strong>POST</strong> request in this example. It usually contains useful information about the webhook that is used in the future. This output will be stored and passed to the webhook_unsubscribe block as an argument.</p>
<pre><code class="lang-json">{
  <span class="hljs-string">&quot;id&quot;</span> : <span class="hljs-string">&quot;96abc2aa-3dcc-11e5-a152-fe34819cdc9a&quot;</span>,
  <span class="hljs-string">&quot;name&quot;</span> : <span class="hljs-string">&quot;My Awesome Webhook&quot;</span>,
  <span class="hljs-string">&quot;targetUrl&quot;</span> : <span class="hljs-string">&quot;https://example.com/mywebhook&quot;</span>,
  <span class="hljs-string">&quot;resource&quot;</span> : <span class="hljs-string">&quot;messages&quot;</span>,
  <span class="hljs-string">&quot;event&quot;</span> : <span class="hljs-string">&quot;created&quot;</span>,
  <span class="hljs-string">&quot;filter&quot;</span> : <span class="hljs-string">&quot;roomId=Y2lzY29zcGFyazovL3VzL1JPT00vYmJjZWIxYWQtNDNmMS0zYjU4LTkxNDctZjE0YmIwYzRkMTU0&quot;</span>,
  <span class="hljs-string">&quot;secret&quot;</span> : <span class="hljs-string">&quot;86dacc007724d8ea666f88fc77d918dad9537a15&quot;</span>,
  <span class="hljs-string">&quot;created&quot;</span> : <span class="hljs-string">&quot;2015-10-18T14:26:16+00:00&quot;</span>
}
</code></pre>
<h2 id="webhookunsubscribe">webhook_unsubscribe</h2>
<p>This block will be called when a running recipe is stopped. It should contain an expression to unsubscribe from the existing webhook notifications.</p>
<pre><code class="lang-ruby"><span class="hljs-symbol">webhook_unsubscribe:</span> lambda <span class="hljs-keyword">do</span> |webhook, connection|
  delete(<span class="hljs-string">&quot;https://api.ciscospark.com/v1/webhooks/<span class="hljs-subst">#{webhook[<span class="hljs-string">&apos;id&apos;</span>]}</span>&quot;</span>)
<span class="hljs-keyword">end</span>
</code></pre>
<h3 id="webhookunsubscribe-arguments">webhook_unsubscribe Arguments</h3>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>webhook</td>
<td>This will contain the output of the webhook_subscribe block. In this example, it will contain the JSON response shown above. For this particular API, making a DELETE request to the resource endpoint will unsubsribe the webhook from notifications and effectively stop the recipe from receive any new notifications.</td>
</tr>
<tr>
<td>connection</td>
<td><code>connection</code> object, frequently used to access domain or subdomain information from the user.</td>
</tr>
</tbody>
</table>
<h2 id="webhooknotification">webhook_notification</h2>
<p>When the webhook trigger receives a webhook notification, the payload is processed through this block. Here, we can access the desired key that contains the webhook notification data.</p>
<h3 id="webhooknotification-payload">webhook_notification payload</h3>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>input</td>
<td><code>input</code> object: Data from trigger input fields. In this example, the input contains the Room ID to receive messages from.</td>
</tr>
<tr>
<td>payload</td>
<td>original payload from the webhook POST/PUT notification.</td>
</tr>
</tbody>
</table>
<p>Extract from the CiscoSpark API documentation:</p>
<blockquote>
<p>&quot;When one of your webhooks is triggered, Spark will send an HTTP POST to your backend at the specified targetUrl. The body of the POST will look something like this:&quot;</p>
</blockquote>
<pre><code class="lang-json">{
  <span class="hljs-string">&quot;id&quot;</span>:<span class="hljs-string">&quot;Y2lzY29zcGFyazovL3VzL1dFQkhPT0svZjRlNjA1NjAtNjYwMi00ZmIwLWEyNWEtOTQ5ODgxNjA5NDk3&quot;</span>,
  <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;Guild Chat to http://requestb.in/1jw0w3x1&quot;</span>,
  <span class="hljs-string">&quot;resource&quot;</span>:<span class="hljs-string">&quot;messages&quot;</span>,
  <span class="hljs-string">&quot;event&quot;</span>:<span class="hljs-string">&quot;created&quot;</span>,
  <span class="hljs-string">&quot;filter&quot;</span>:<span class="hljs-string">&quot;roomId=Y2lzY29zcGFyazovL3VzL1JPT00vY2RlMWRkNDAtMmYwZC0xMWU1LWJhOWMtN2I2NTU2ZDIyMDdi&quot;</span>,
  <span class="hljs-string">&quot;orgId&quot;</span>: <span class="hljs-string">&quot;Y2lzY29zcGFyazovL3VzL09SR0FOSVpBVElPTi8xZWI2NWZkZi05NjQzLTQxN2YtOTk3NC1hZDcyY2FlMGUxMGY&quot;</span>,
  <span class="hljs-string">&quot;createdBy&quot;</span>: <span class="hljs-string">&quot;Y2lzY29zcGFyazovL3VzL1BFT1BMRS8xZjdkZTVjYi04NTYxLTQ2NzEtYmMwMy1iYzk3NDMxNDQ0MmQ&quot;</span>,
  <span class="hljs-string">&quot;appId&quot;</span>: <span class="hljs-string">&quot;Y2lzY29zcGFyazovL3VzL0FQUExJQ0FUSU9OL0MyNzljYjMwYzAyOTE4MGJiNGJkYWViYjA2MWI3OTY1Y2RhMzliNjAyOTdjODUwM2YyNjZhYmY2NmM5OTllYzFm&quot;</span>,
  <span class="hljs-string">&quot;ownedBy&quot;</span>: <span class="hljs-string">&quot;creator&quot;</span>,
  <span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;active&quot;</span>,
  <span class="hljs-string">&quot;actorId&quot;</span>: <span class="hljs-string">&quot;Y2lzY29zcGFyazovL3VzL1BFT1BMRS8xZjdkZTVjYi04NTYxLTQ2NzEtYmMwMy1iYzk3NDMxNDQ0MmQ&quot;</span>,
  <span class="hljs-string">&quot;data&quot;</span>:{
    <span class="hljs-string">&quot;id&quot;</span>:<span class="hljs-string">&quot;Y2lzY29zcGFyazovL3VzL01FU1NBR0UvMzIzZWUyZjAtOWFhZC0xMWU1LTg1YmYtMWRhZjhkNDJlZjlj&quot;</span>,
    <span class="hljs-string">&quot;roomId&quot;</span>:<span class="hljs-string">&quot;Y2lzY29zcGFyazovL3VzL1JPT00vY2RlMWRkNDAtMmYwZC0xMWU1LWJhOWMtN2I2NTU2ZDIyMDdi&quot;</span>,
    <span class="hljs-string">&quot;personId&quot;</span>:<span class="hljs-string">&quot;Y2lzY29zcGFyazovL3VzL1BFT1BMRS9lM2EyNjA4OC1hNmRiLTQxZjgtOTliMC1hNTEyMzkyYzAwOTg&quot;</span>,
    <span class="hljs-string">&quot;personEmail&quot;</span>:<span class="hljs-string">&quot;person@example.com&quot;</span>,
    <span class="hljs-string">&quot;created&quot;</span>:<span class="hljs-string">&quot;2015-12-04T17:33:56.767Z&quot;</span>
  }
}
</code></pre>
<p>Looking at the sample payload, the main message data is bested in the &quot;data&quot; object. Hence, we just need to access and return this &quot;data&quot; object in the webhook_notification block output. This output is then processed in through the trigger into the recipe as a job.</p>
<pre><code class="lang-ruby"><span class="hljs-symbol">webhook_notification:</span> lambda <span class="hljs-keyword">do</span> |input, payload|
  payload[<span class="hljs-string">&quot;data&quot;</span>]
<span class="hljs-keyword">end</span>
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
        

  <div class="ask">
    <div class="ask__title">Didn’t find what you are looking for?</div>
    <div class="ask__links">
      <a href="https://support.workato.com/support/home" class="ask__link">
        <span class="ask__link-title">Search our resource library</span>
        <span class="ask__link-description">View getting started guides, tutorials, training videos, webinars and FAQ</span>
      </a>
      <a href="https://support.workato.com/support/discussions" class="ask__link">
        <span class="ask__link-title">Ask our community</span>
        <span class="ask__link-description">View questions and answers from other users and Workato experts.</span>
      </a>
      <a href="https://support.workato.com/support/tickets/new" class="ask__link">
        <span class="ask__link-title">File a support ticket</span>
        <span class="ask__link-description">File a support ticket for critical issues that require a higher level of support.</span>
      </a>
    </div>
  </div>

  
<footer class="footer">
  <div class="footer__inner">
    <div class="footer__navigation">
      <div class="footer__menu">
        <div class="footer__menu-title">
          Apps
        </div>
        <ul class="footer__menu-list">
          <li class="footer__menu-item">
            <a class="footer__menu-link" href="https://www.workato.com/partners/atlassian">Atlassian</a>
          </li>
          <li class="footer__menu-item">
            <a class="footer__menu-link" href="https://www.workato.com/integrations/box">Box</a>
          </li>
          <li class="footer__menu-item">
            <a class="footer__menu-link" href="https://www.workato.com/integrations/eventbrite">Eventbrite</a>
          </li>
          <li class="footer__menu-item">
            <a class="footer__menu-link" href="https://www.workato.com/integrations/infusionsoft">Infusionsoft</a>
          </li>
          <li class="footer__menu-item">
            <a class="footer__menu-link" href="https://www.workato.com/integrations/intacct">Intacct</a>
          </li>
          <li class="footer__menu-item">
            <a class="footer__menu-link" href="https://www.workato.com/integrations/jira">JIRA</a>
          </li>
          <li class="footer__menu-item">
            <a class="footer__menu-link" href="https://www.workato.com/integrations/marketo">Marketo</a>
          </li>
          <li class="footer__menu-item">
            <a class="footer__menu-link" href="https://www.workato.com/integrations/quickbase">QuickBase</a>
          </li>
          <li class="footer__menu-item">
            <a class="footer__menu-link" href="https://www.workato.com/integrations/quickbooks">QuickBooks</a>
          </li>
          <li class="footer__menu-item">
            <a class="footer__menu-link" href="https://www.workato.com/integrations/salesforce">Salesforce</a>
          </li>
          <li class="footer__menu-item">
            <a class="footer__menu-link" href="https://www.workato.com/integrations/service_now">ServiceNow</a>
          </li>
          <li class="footer__menu-item">
            <a class="footer__menu-link" data-mixpanel-link="footer_workbot_link"
              href="https://www.workato.com/workbot-slack">Workbot</a>
          </li>
          <li class="footer__menu-item">
            <a class="footer__menu-link" href="https://www.workato.com/integrations/xero">Xero</a>
          </li>
          <li class="footer__menu-item">
            <a class="footer__menu-link" href="https://www.workato.com/integrations/zendesk">Zendesk</a>
          </li>
        </ul>
      </div>
      <div class="footer__menu">
        <div class="footer__menu-title">
          About
        </div>
        <ul class="footer__menu-list">
          <li class="footer__menu-item">
            <a class="footer__menu-link" href="https://www.workato.com/features">Why Workato</a>
          </li>
          <li class="footer__menu-item">
            <a class="footer__menu-link" href="https://resources.workato.com/how-it-works/">How it
              works</a>
          </li>
          <li class="footer__menu-item">
            <a class="footer__menu-link footer__menu-link_pricing" href="https://www.workato.com/pricing"
             >Pricing</a>
          </li>
          <li class="footer__menu-item">
            <a class="footer__menu-link" href="https://www.workato.com/partners">ISV Partners</a>
          </li>
          <li class="footer__menu-item">
            <a class="footer__menu-link" href="http://resources.workato.com/partners/">Consulting
              Partners</a>
          </li>
          <li class="footer__menu-item">
            <a class="footer__menu-link" href="https://www.workato.com/security">Security</a>
          </li>
          <li class="footer__menu-item">
            <a class="footer__menu-link" href="http://resources.workato.com/content-library/">Solutions</a>
          </li>
          <li class="footer__menu-item">
            <a class="footer__menu-link" href="http://blog.workato.com" target="_blank">Blog</a>
          </li>
          <li class="footer__menu-item">
            <a class="footer__menu-link" href="https://www.workato.com/about_us">Team</a>
          </li>
        </ul>
      </div>
      <div class="footer__menu">
        <div class="footer__menu-title">
          Support
        </div>
        <ul class="footer__menu-list">
          <li class="footer__menu-item">
            <a class="footer__menu-link" href="https://www.workato.com/support">Support plans</a>
          </li>
          <li class="footer__menu-item">
            <a class="footer__menu-link" href="https://support.workato.com/support/home" target="_blank">Help
              Center</a>
          </li>
          <li class="footer__menu-item">
            <a class="footer__menu-link" href="https://resources.workato.com/webinars">Webinars</a>
          </li>
          <li class="footer__menu-item">
            <a class="footer__menu-link" href="https://resources.workato.com/content-library/#lp-pom-text-278"
             >Tutorials</a>
          </li>
          <li class="footer__menu-item">
            <a class="footer__menu-link" href="http://developer.workato.com">Developer</a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer__side">
      <div class="footer__terms">
        <span class="footer__terms-item">
          <a class="footer__terms-link" href="https://www.workato.com/privacy">Privacy</a>
        </span>
        <span class="footer__terms-item">
          <a class="footer__terms-link" href="https://www.workato.com/terms">Terms</a>
        </span>
        <span class="footer__terms-item">
          <a class="footer__terms-link" href="tel:+18444696752">(844) 469-6752</a>
        </span>
        <span class="footer__terms-item">Workato 2017</span>
      </div>
      <div class="footer__social">
        <a class="footer__social-icon" href="mailto:info@workato.com">
          <span class="fa fa-envelope"></span>
        </a>
        <a class="footer__social-icon" href="https://facebook.com/workato" rel="noopener" target="_blank">
          <span class="fa fa-facebook"></span>
        </a>
        <a class="footer__social-icon" href="https://twitter.com/workato" rel="noopener" target="_blank">
          <span class="fa fa-twitter"></span>
        </a>
        <a class="footer__social-icon" href="https://linkedin.com/company/workato" rel="noopener" target="_blank">
          <span class="fa fa-linkedin"></span>
        </a>
      </div>
    </div>
  </div>
</footer>


    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Webhook trigger","level":"1.15.3.6.2","depth":4,"next":{"title":"Object definition","level":"1.15.3.7","depth":3,"path":"developing-connectors/sdk/object-definition.md","ref":"developing-connectors/sdk/object-definition.md","articles":[]},"previous":{"title":"Poll trigger","level":"1.15.3.6.1","depth":4,"path":"developing-connectors/sdk/trigger/poll-trigger.md","ref":"developing-connectors/sdk/trigger/poll-trigger.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"3.2.2","theme":"default","variables":{},"plugins":["edit-link","-sharing","-fontsettings","favicon","toggle-chapters"],"pluginsConfig":{"edit-link":{"label":"","base":"https://github.com/workato/docs/edit/master/","multilingual":false},"favicon":{"shortcut":"/assets/images/favicon/favicon.ico","bookmark":"/assets/images/favicon/favicon.ico","appleTouch":"/assets/images/favicon/android-chrome-36x36.png"},"toggle-chapters":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"developing-connectors/sdk/trigger/webhook-trigger.md","mtime":"2017-04-03T16:23:35.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-04-03T16:24:55.456Z"},"basePath":"../../..","book":{"language":""}});
        });
    </script>
</div>


        
  
    <script src="../../../gitbook/gitbook.js"></script>
    <script src="../../../gitbook/theme.js"></script>
    
        
        <script src="../../../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-toggle-chapters/toggle.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    

  <script src="/assets/scripts/main.js"></script>

    </body>
</html>

